<!DOCTYPE html>
<html>

<head>
    <title>BONAVENTURA ADMIN</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/background_color.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/contact-718.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/cs-button-6.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/footer.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/gallery-45.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/header.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/hero-82.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/hero-408.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/property-grid.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/services.css') }}">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/table.css') }}">
    <script src="{{ url_for('static', filename='js/header.js') }}"></script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $(document).ready(function () {
            $('.day-dropdown').on('click', function () {
                var date = $(this).data('date');
                var formattedDate = date.split(', ')[1]; // Extract only the 'YYYY-MM-DD' part
                var url = '/properties/' + formattedDate;
                window.location.href = url;
            });
        });
    </script>

    <link rel='stylesheet'
        href='https://cdn-uicons.flaticon.com/2.0.0/uicons-solid-straight/css/uicons-solid-straight.css'>
</head>

<body>
    <div class="wrapper">
        <header id="cs-navigation">
            <div class="cs-container">
                <!--Nav Logo-->
                <a href="{{ url_for('home') }}" class="cs-logo" aria-label="back to home">
                    <img src="{{ url_for('static', filename='images/background.jpg') }}" alt="logo" width="210"
                        height="29" aria-hidden="true" decoding="async">
                </a>
                <!--Navigation List-->
                <nav class="cs-nav" role="navigation">
                    <!--Mobile Nav Toggle-->
                    <button class="cs-toggle" aria-label="mobile menu toggle">
                        <div class="cs-box" aria-hidden="true">
                            <span class="cs-line cs-line1" aria-hidden="true"></span>
                            <span class="cs-line cs-line2" aria-hidden="true"></span>
                            <span class="cs-line cs-line3" aria-hidden="true"></span>
                        </div>
                    </button>
                    <div class="cs-ul-wrapper">
                        <ul id="cs-expanded" class="cs-ul" aria-expanded="false">
                            <li class="cs-li">
                                <a href="{{ url_for('upload_pdf') }}" class="cs-li-link">
                                    <p class="cs-topper">Upload PDF</p>
                                </a>
                            </li>
                            <li class="cs-li">
                                <a href="{{ url_for('admin_usercontrol') }}" class="cs-li-link">
                                    <p class="cs-topper">User Manager</p>
                                </a>
                            </li>

                        </ul>
                    </div>
                </nav>
            </div>
        </header>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <div style="text-align: center; margin-bottom: 20px;">
            <form action="{{ url_for('admin') }}" method="get">
                <label for="county">Select County:</label>
                <select name="county" id="county">
                    <option value="">All Counties</option>
                    {% for county in counties %}
                    <option value="{{ county }}" {% if selected_county==county %}selected{% endif %}>{{ county }}
                    </option>
                    {% endfor %}
                </select>
                <button type="submit">SORT</button>
            </form>

        </div>

        <!--
        <div class="property-grid">
            {% for property in properties %}
            <div class="property-tile">
                
                <a href="{{ url_for('property_details', id = property['id']) }}" class="property-link">
                    <img class="property-image" src="{{ property['photo_url'] }}" alt="Agent Uploading Image Soon">
                    <div class="property-content">
                        <table style="width: 100%;">
                            <tbody>
                                <tr>
                                    <td style="text-align: left; color: #ff6a3e; font-weight: bolder;">Address</td>
                                    <td style="text-align: right; font-weight: bold;">{{ property['addresses'] }}</td>
                                </tr>
                                <tr>
                                    <td style="text-align: left; color: #ff6a3e; font-weight: bold;">County</td>
                                    <td style="text-align: right;">{{ property['county'] }}</td>
                                </tr>
                                <tr>
                                    <td><i class="fi fi-ss-bed-empty"></i></td>
                                    <td style="text-align: right;">{{ property['bedrooms'] }}</td>
                                </tr>
                                <tr>
                                    <td><i class="fi fi-ss-shower"></i></td>
                                    <td style="text-align: right;">{{ property['bathrooms'] }}</td>
                                </tr>
                                <br>
                                <tr>
                                    <td style="text-align: left; color: #ff6a3e; font-weight: bold;">Sqft</td>
                                    <td style="text-align: right;">{{ property['livingArea'] }}</td>
                                </tr>
                                <tr>
                                    <td style="text-align: left; color: #ff6a3e; font-weight: bold;">Acres</td>
                                    <td style="text-align: right;">
                                        {% if property['lotSize'] %}
                                        {{ "%.2f"|format((property['lotSize']) / 43560) }}
                                        {% else %}
                                        Not Available
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: left; color: #ff6a3e; font-weight: bold;">Date of Sale</td>
                                    <td style="text-align: right;">{{ property['dateOfSale'] }}</td>
                                </tr>
                                <tr>
                                    <td style="text-align: left; color: #ff6a3e; font-weight: bold;">Time of Sale</td>
                                    <td style="text-align: right;">{{ property['timeOfSale'] }}</td>
                                </tr>


                            </tbody>
                        </table>
                    </div>
                </a>
                <div class="property-buttons">
                    <a href="{{ url_for('edit_address', id=property['id']) }}" class="cs-button-4"
                        aria-label="read more about us">Edit</a>
                    <a href="{{ url_for('delete_address', id=property['id']) }}" class="cs-button-4"
                        aria-label="read more about us">Delete</a>
                    <a href="" class="cs-button-4" aria-label="read more about us">Add Photos</a>
                    

                </div>

            </div>
            {% endfor %}
        </div>
        -->
        <!-- 
        <div class="calendar-grid">
            {% for formatted_date, properties_on_date in properties_by_date.items() %}
            <div class="day-dropdown">
                <button class="dropdown-btn">{{ formatted_date }} ({{ properties_on_date|length }} Properties)</button>
                <div class="dropdown-content">
                    {% for property in properties_on_date %}
                    <div class="property-tile">
                        
                        <a href="{{ url_for('property_details', id = property['id']) }}" class="property-link">
                            <img class="property-image" src="{{ property['photo_url'] }}"
                                alt="Agent Uploading Image Soon">
                            <div class="property-content">
                                <table style="width: 100%;">
                                    <tbody>
                                        <tr>
                                            <td style="text-align: left; color: #808080;">Address</td>
                                            <td style="text-align: right; font-weight: bold;">{{ property['addresses']
                                                }}</td>
                                        </tr>
                                        <tr>
                                            <td style="text-align: left; color: #808080;">Time of Sale</td>
                                            <td style="text-align: right; font-weight: bold;">{{ property['timeOfSale']
                                                }}</td>
                                        </tr>
                                        <tr>
                                            <td style="text-align: left; color: #808080;">Final Judgement ($)</td>
                                            <td style="text-align: right; font-weight: bold;">{{ property['price'] |
                                                format_currency }}</td>
                                        </tr>
                                        <tr>
                                            <td style="text-align: left; color: #808080;">County</td>
                                            <td style="text-align: right; font-weight: bold;">{{ property['county'] }}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="text-align: left; color: #808080;">Sqft</td>
                                            <td style="text-align: right; font-weight: bold;">{{ property['livingArea']
                                                }}</td>
                                        </tr>
                                        <tr>
                                            <td style="text-align: left; color: #808080;">Acres</td>
                                            <td style="text-align: right; font-weight: bold;">
                                                {% if property['lotSize'] %}
                                                {{ "%.2f"|format((property['lotSize']) / 43560) }}
                                                {% else %}
                                                Not Available
                                                {% endif %}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><i style="text-align: left;" class="fi fi-ss-bed-empty"></i></td>
                                            <td style="text-align: right; font-weight: bold;">{{ property['bedrooms'] }}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><i style="text-align: left;" class="fi fi-ss-shower"></i></td>
                                            <td style="text-align: right; font-weight: bold;">{{ property['bathrooms']
                                                }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </a>
                        <div class="property-buttons">
                            <a href="{{ url_for('edit_address', id=property['id']) }}" class="cs-button-4"
                                aria-label="read more about us">Edit</a>
                            <a href="{{ url_for('delete_address', id=property['id']) }}" class="cs-button-4"
                                aria-label="read more about us">Delete</a>
                            <a href="" class="cs-button-4" aria-label="read more about us">Photos</a>
                            <a href="{{ url_for('bid', id=property['id'], address=property['address']) }}"
                                class="cs-button-4" aria-label="read more about us">Bid</a>


                        </div>

                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
        -->
        <div class="month-header">
            <h1>{{ current_month }}</h1>
        </div>
        {% set start_position = first_weekday + 1 %} <!-- Assuming first_weekday is 0 for Monday -->
        <div class="calendar-grid">
            <!-- Calendar Header -->
            <div class="calendar-header">
                <div class="calender-header-content">Mon</div>
                <div class="calender-header-content">Tue</div>
                <div class="calender-header-content">Wed</div>
                <div class="calender-header-content">Thu</div>
                <div class="calender-header-content">Fri</div>
                <div class="calender-header-content">Sat</div>
                <div class="calender-header-content">Sun</div>
            </div>
        
            <!-- Empty Cells Before Start of Month -->
            {% for _ in range(start_position - 1) %}
                <div class="day-dropdown tile empty"></div>
            {% endfor %}
        
            <!-- Calendar Days -->
            {% for date in date_list %}
                {% set formatted_date = date.strftime('%A, %Y-%m-%d') %}
                {% set is_today = (date.date() == current_date) %}
                
                <!-- Check if there are properties for the date -->
                {% if formatted_date in properties_by_date %}
                    <!-- Day with Properties -->
                    <a href="{{ url_for('properties_for_day', date=date.strftime('%Y-%m-%d')) }}"
                       class="day-dropdown tile {{ 'highlight-today' if is_today else '' }}">
                        {{ date.day }} ({{ properties_by_date[formatted_date] | length }} Properties)
                    </a>
                {% else %}
                    <!-- Day Without Properties -->
                    <div class="day-dropdown tile no-properties {{ 'highlight-today' if is_today else '' }}">
                        {{ date.day }}
                    </div>
                {% endif %}
            {% endfor %}
        </div>



        <br>
        <br>
        <br>

        <footer>
            <p>© Bonaventura</p>
        </footer>

    </div>
</body>

</html>